<%- partial('post/title', {item: item, index: false}) %>

<div class="row <% if (post) { %>post<% } else { %>page<% } %>">
	<!-- cols -->
	<% if (post) { %>
	<div id="top_meta"></div>
	<div class="col-md-9">
	<% } else { %>
	<div class="col-md-12">
	<% } %>

	<!-- content -->
	<div class="mypage">		
	  <% if (item.description) { %>
		 <div class="alert alert-success description">
			<i class="fa fa-info-circle"></i> <%- item.description %>
		 </div> <!-- alert -->
	  <% } %>		

	  <% 
		  // 配置截取字符数（可根据20行效果微调，300为参考值）
		  var excerptLength = 300;
		  // 优先使用文章摘要，无摘要则截取正文前N个字符
		  var excerptContent = item.excerpt || item.content.substring(0, excerptLength);
		  // 判断正文长度是否超过截取长度，超过则添加省略号和阅读更多链接
		  if (item.content.length > excerptLength) {
			excerptContent += '... <a href="' + url_for(item.path) + '" class="read-more">阅读更多</a>';
		  }
		%>
		<%- excerptContent %>	  
	</div>

	<div>
  	<center>
	<%- partial('post/pagination', {page: item}) %>
    </center>
	</div>
	
	<!-- comment -->
	<%- partial('post/comment', {page: item}) %>
	</div> <!-- col-md-9/col-md-12 -->
		
	<% if (post) { %>
	<div id="side_meta">
		<%- partial('post/meta', {item: item}) %>
	</div>
	<% } %>	

</div><!-- row -->
<%- partial('post/comment_footer', {page: item}) %>
